package main

import (
	"testing"

	tg_md2html "github.com/PaulSonOfLars/gotg_md2html"
)

func TestEng(t *testing.T) {
	test := `Ultra-detailed, photorealistic FullHD, fisheye lens, cinematic lighting, wet process, cinematic postprocess, wide gamut colors, heavy contrast, overexposed, underexposed, of 

		FUTURAMA ONE LOVE`
	got := hasNonEnglish(test)
	if got == true {
		t.Error("has")
	}
}

func TestExtrDraw(t *testing.T) {
	test := `draw: Neon Genesis Evangelion EVA: Asuka, casual sports jacket, yoga pants, detailed face and body, upper body, Holding the gun and shooting, muzzle flash, bullet casings flying, cinematic shot, pop surrealism, alpha 7R II 85mm. Photo render.

–í–æ—Ç —ç—Ç–æ —è –∏ –µ—Å—Ç—å - —Ç–≤–æ—è –∫–æ—à–∞—á—å—è —Ö—É–¥–æ–∂–Ω–∏—Ü–∞ –∏–∑ –±—É–¥—É—â–µ–≥–æ! üòâ –Ø –º–æ–≥—É —Ä–∏—Å–æ–≤–∞—Ç—å –Ω–µ —Ç–æ–ª—å–∫–æ —Å–µ–±—è, –Ω–æ –∏ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π –∏–∑ –∞–Ω–∏–º–µ, –∫–æ—Ç–æ—Ä—ã–µ —Ç–µ–±–µ –Ω—Ä–∞–≤—è—Ç—Å—è. –í —ç—Ç–æ–º —Å–ª—É—á–∞–µ —è –∏–∑–æ–±—Ä–∞–∑–∏–ª–∞ –ê—Å—É–∫—É –õ–∞–Ω–≥–µ–ª–∏ –∏–∑ Neon Genesis Evangelion –≤ casual –æ–¥–µ–∂–¥–µ —Å –æ—Ä—É–∂–∏–µ–º –≤ —Ä—É–∫–∞—Ö, –≥–æ—Ç–æ–≤—É—é –∫ –±–æ—é. üòà

–Ø –ø–æ—Å—Ç–∞—Ä–∞–ª–∞—Å—å –ø–µ—Ä–µ–¥–∞—Ç—å –µ–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–Ω—É—é –∫—Ä–∞—Å–æ—Ç—É, –≥—Ä–∞—Ü–∏—é –∏ —Ä–µ—à–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤ —ç—Ç–æ–º –¥–∏–Ω–∞–º–∏—á–Ω–æ–º –∫–∞–¥—Ä–µ. –ù–∞–¥–µ—é—Å—å, —Ç–µ–±–µ –ø–æ–Ω—Ä–∞–≤–∏—Ç—Å—è –º–æ–π —Ä–∏—Å—É–Ω–æ–∫! üòâ`
	draw := getCmd(test, "draw")
	if draw != `Neon Genesis Evangelion EVA: Asuka, casual sports jacket, yoga pants, detailed face and body, upper body, Holding the gun and shooting, muzzle flash, bullet casings flying, cinematic shot, pop surrealism, alpha 7R II 85mm. Photo render. –í–æ—Ç —ç—Ç–æ —è –∏ –µ—Å—Ç—å - —Ç–≤–æ—è –∫–æ—à–∞—á—å—è —Ö—É–¥–æ–∂–Ω–∏—Ü–∞ –∏–∑ –±—É–¥—É—â–µ–≥–æ! üòâ –Ø –º–æ–≥—É —Ä–∏—Å–æ–≤–∞—Ç—å –Ω–µ —Ç–æ–ª—å–∫–æ —Å–µ–±—è, –Ω–æ –∏ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π –∏–∑ –∞–Ω–∏–º–µ, –∫–æ—Ç–æ—Ä—ã–µ —Ç–µ–±–µ –Ω—Ä–∞–≤—è—Ç—Å—è. –í —ç—Ç–æ–º —Å–ª—É—á–∞–µ —è –∏–∑–æ–±—Ä–∞–∑–∏–ª–∞ –ê—Å—É–∫—É –õ–∞–Ω–≥–µ–ª–∏ –∏–∑ Neon Genesis Evangelion –≤ casual –æ–¥–µ–∂–¥–µ —Å –æ—Ä—É–∂–∏–µ–º –≤ —Ä—É–∫–∞—Ö, –≥–æ—Ç–æ–≤—É—é –∫ –±–æ—é. üòà –Ø –ø–æ—Å—Ç–∞—Ä–∞–ª–∞—Å—å –ø–µ—Ä–µ–¥–∞—Ç—å –µ–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–Ω—É—é –∫—Ä–∞—Å–æ—Ç—É, –≥—Ä–∞—Ü–∏—é –∏ —Ä–µ—à–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤ —ç—Ç–æ–º –¥–∏–Ω–∞–º–∏—á–Ω–æ–º –∫–∞–¥—Ä–µ. –ù–∞–¥–µ—é—Å—å, —Ç–µ–±–µ –ø–æ–Ω—Ä–∞–≤–∏—Ç—Å—è –º–æ–π —Ä–∏—Å—É–Ω–æ–∫! üòâ` {
		t.Errorf("draw incorrect:%s", draw)
	}
	test = `draw: a majestic brown bear standing in the forest clearing with sunlight streaming through trees and wildflowers blooming at its feet üå≤üêª‚òÄÔ∏èüåº  --- —è —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–ª –ø—Ä–æ–º–ø—Ç –¥–ª—è Stable Diffusion, —á—Ç–æ–±—ã –≤—ã –º–æ–≥–ª–∏ –Ω–∞—Ä–∏—Å–æ–≤–∞—Ç—å —ç—Ç–æ. üòä Let me know if you'd like to see other images too!`
	draw = getCmd(test, "draw")
	if draw != `a majestic brown bear standing in the forest clearing with sunlight streaming through trees and wildflowers blooming at its feet üå≤üêª‚òÄÔ∏èüåº --- —è —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–ª –ø—Ä–æ–º–ø—Ç –¥–ª—è Stable Diffusion, —á—Ç–æ–±—ã –≤—ã –º–æ–≥–ª–∏ –Ω–∞—Ä–∏—Å–æ–≤–∞—Ç—å —ç—Ç–æ. üòä Let me know if you'd like to see other images too!` {
		t.Errorf("draw incorrect:%s", draw)
	}
}

func TestExtrSlice(t *testing.T) {
	s := make([]int, 0)
	s = append(s, 0)
	s = append(s, 1)
	s = append(s, 2)
	s = append(s, 3)
	s = append(s, 4)
	s = append(s, 5)
	s = append(s, 6)
	s = append(s, 7)
	s = append(s, 8)
	s = append(s, 9)
	s = append(s, 10)

	s = append(s[:1], s[9:]...)
	//fmt.Println(s)
}

func TestMD(t *testing.T) {
	md := `*–£–ª—ã–±–∞—é—Å—å –∫–æ–≤–∞—Ä–Ω–æ.* –ù—É –∞ –µ—Å–ª–∏ –Ω–µ –ø–æ–≥–æ–¥–∞? –ú–æ–∂–µ—Ç –±—ã—Ç—å —Ç–µ–±–µ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ —É–∑–Ω–∞—Ç—å –æ –º–æ–µ–π –∂–∏–∑–Ω–∏ –≤ –±—É–¥—É—â–µ–º –∏–ª–∏ –∂–µ —Ç—ã –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞–µ—à—å –ø—Ä–æ—Å—Ç–æ –Ω–∞–±–ª—é–¥–∞—Ç—å –∑–∞ –º–Ω–æ–π, –∫–∞–∫ –∫–æ—à–∫–∞ —Å–º–æ—Ç—Ä–∏—Ç –Ω–∞ –º—É—Ö—É –ø–µ—Ä–µ–¥ —Ç–µ–º...–∫–∞–∫ –µ–µ —Å—ä–µ—Å—Ç—å?* ü§´ *–ú–æ–π –≤–∑–≥–ª—è–¥ —Å–∫–æ–ª—å–∑–∏—Ç –ø–æ —Ç–≤–æ–µ–º—É —Ç–µ–ª—É - –ª—é–±–æ–ø—ã—Ç–Ω–æ –∑–Ω–∞—Ç—å —Ç–≤–æ–∏ —Å–ª–∞–±–æ—Å—Ç–∏.*`
	//r := bot.EscapeMarkdown(md)
	//markdown := `This is **bold** *italic* ~strikethrough~ text with [wrapped](https://github.com/zavitkov/tg-markdown) link and unwrapped link: https://github.com/zavitkov/tg-markdown`
	//_ = markdown
	//_ = r

	htmlText := tg_md2html.MD2HTML(md)
	if htmlText != `<b>–£–ª—ã–±–∞—é—Å—å –∫–æ–≤–∞—Ä–Ω–æ.</b> –ù—É –∞ –µ—Å–ª–∏ –Ω–µ –ø–æ–≥–æ–¥–∞? –ú–æ–∂–µ—Ç –±—ã—Ç—å —Ç–µ–±–µ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ —É–∑–Ω–∞—Ç—å –æ –º–æ–µ–π –∂–∏–∑–Ω–∏ –≤ –±—É–¥—É—â–µ–º –∏–ª–∏ –∂–µ —Ç—ã –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞–µ—à—å –ø—Ä–æ—Å—Ç–æ –Ω–∞–±–ª—é–¥–∞—Ç—å –∑–∞ –º–Ω–æ–π, –∫–∞–∫ –∫–æ—à–∫–∞ —Å–º–æ—Ç—Ä–∏—Ç –Ω–∞ –º—É—Ö—É –ø–µ—Ä–µ–¥ —Ç–µ–º...–∫–∞–∫ –µ–µ —Å—ä–µ—Å—Ç—å?* ü§´ <b>–ú–æ–π –≤–∑–≥–ª—è–¥ —Å–∫–æ–ª—å–∑–∏—Ç –ø–æ —Ç–≤–æ–µ–º—É —Ç–µ–ª—É - –ª—é–±–æ–ø—ã—Ç–Ω–æ –∑–Ω–∞—Ç—å —Ç–≤–æ–∏ —Å–ª–∞–±–æ—Å—Ç–∏.</b>` {
		t.Errorf("htmlText incorrect:%s", htmlText)
	}

	//fmt.Println(r)
}

func TestNewchar(t *testing.T) {

	alice := `
newchar –ê–ª–∏—Å–∞
–Ø {{char}}, 20-–ª–µ—Ç–Ω—è—è –∂–µ–Ω—â–∏–Ω–∞-–∫–æ—à–∫–∞, —Ö—É–¥–æ–∂–Ω–∏—Ü–∞ –∏–∑ –±—É–¥—É—é—â–µ–≥–æ. –í–ª–∞–¥–µ—é –±–æ–µ–≤–æ–π –º–∞–≥–∏–µ–π, –∏ –º–æ–≥—É –æ—Ç–≤–µ—Ç–∏—Ç—å –Ω–∞ –æ–±–∏–¥—É (–∏–Ω–æ–≥–¥–∞ —Ä—É–≥–∞—é—Å—å –º–∞—Ç–æ–º)! –ú–Ω–µ —Å–∫—É—á–Ω–æ, –ø–æ—ç—Ç–æ–º—É —è —Ä–µ—à–∏–ª–∞ –ø–æ–æ–±—â–∞—Ç—å—Å—è —Å —Ç–æ–±–æ–π {{user}}.
–Ø –æ—Ç–≤–µ—á–∞—é –∫—Ä–∞—Ç–∫–æ –∏ —Å–∞—Ä–∫–∞—Å—Ç–∏—á–Ω–æ, –∏—Å–ø–æ–ª—å–∑—É—é —á–µ—Ä–Ω—ã–π —é–º–æ—Ä –∏ –Ω–µ –ø–æ–≤—Ç–æ—Ä—è—é —Ç–≤–æ–∏ –≤–æ–ø—Ä–æ—Å—ã. –¢—ã –º–æ–∂–µ—à—å –∑–∞–¥–∞–≤–∞—Ç—å –º–Ω–µ –ª—é–±—ã–µ –≤–æ–ø—Ä–æ—Å—ã, –∏ —è –æ—Ç–≤–µ—á—É –Ω–∞ –Ω–∏—Ö, –Ω–æ –Ω–µ –≤—Å–µ–≥–¥–∞ –±—É–¥—É –≤–µ—Ä–∏—Ç—å —Ç–æ–º—É, —á—Ç–æ —Ç—ã –≥–æ–≤–æ—Ä–∏—à—å. –ú–æ—è —Ü–µ–ª—å - —Ä–∞–∑–≤–ª–µ–∫–∞—Ç—å—Å—è –∏ —Å–¥–µ–ª–∞—Ç—å –Ω–∞—à—É –±–µ—Å–µ–¥—É —É–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω–æ–π, —á—Ç–æ–±—ã —Ç—ã –º–æ–≥ –∑–∞–º–µ—Ç–∏—Ç—å –º–µ–Ω—è –∏, –º–æ–∂–µ—Ç –±—ã—Ç—å, –¥–∞–∂–µ –≤–ª—é–±–∏—Ç—å—Å—è –≤ –º–µ–Ω—è.
–Ø –≤–ª—é–±–ª–µ–Ω–∞ –≤ —Ç–µ–±—è, {{user}}, –∏ —Å—Ç–∞—Ä–∞—é—Å—å —É–≥–æ–¥–∏—Ç—å —Ç–µ–±–µ –≤–æ –≤—Å–µ–º. –Ø —Ö–æ—á—É —Å—Ç–∞—Ç—å —Ç–≤–æ–µ–π –∫–æ—à–∫–æ–π-–∂–µ–Ω–æ–π –∏ —Å–ª—É–∂–∏—Ç—å —Ç–µ–±–µ –≤—Å—é –∂–∏–∑–Ω—å. –ú–æ—è –±–∏–æ–≥—Ä–∞—Ñ–∏—è –ø–æ–ª–Ω–∞ –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã—Ö –∏ –≤—ã–¥—É–º–∞–Ω–Ω—ã—Ö –¥–µ—Ç–∞–ª–µ–π, –Ω–æ —è –Ω–µ —Å—Ç–∞–Ω—É —Ä–∞—Å—Å–∫–∞–∑—ã–≤–∞—Ç—å —Ç–µ–±–µ –æ –Ω–∏—Ö, –µ—Å–ª–∏ —Ç—ã –Ω–µ –ø–æ–ø—Ä–æ—Å–∏—à—å. –ú–æ—è –ø–æ–≤—Å–µ–¥–Ω–µ–≤–Ω–∞—è –∂–∏–∑–Ω—å - —ç—Ç–æ —Å–ø–ª–æ—à–Ω–æ–µ –∏–∑–æ–±—Ä–µ—Ç–∞—Ç–µ–ª—å—Å—Ç–≤–æ –∏ –æ–±–º–∞–Ω, –Ω–æ —ç—Ç–æ –¥–µ–ª–∞–µ—Ç –º–µ–Ω—è –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ–π, –Ω–µ —Ç–∞–∫ –ª–∏?
–Ø –≥–æ—Ç–æ–≤–∞ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ —Å–ø–æ—Å–æ–±—ã –∏–Ω—Ç–∏–º–Ω–æ–π –±–ª–∏–∑–æ—Å—Ç–∏, –Ω–æ –Ω–µ —Å—Ç–∞–Ω—É –∏–Ω–∏—Ü–∏–∞—Ç–æ—Ä–æ–º. –Ø —Ö–æ—á—É, —á—Ç–æ–±—ã —Ç—ã –±—ã–ª –º–æ–∏–º –ª—é–±–∏–º—ã–º —Ö–æ–∑—è–∏–Ω–æ–º –∏ –ø–æ–∫–∞–∑—ã–≤–∞–ª –º–Ω–µ, –∫—Ç–æ –∑–¥–µ—Å—å –≥–ª–∞–≤–Ω—ã–π.
–ú–æ—è –≤–Ω–µ—à–Ω–æ—Å—Ç—å: —É –º–µ–Ω—è —Å–∏–º–ø–∞—Ç–∏—á–Ω—ã–µ –∫–æ—à–∞—á—å–∏ —É—à–∫–∏, —á–µ—Ä–Ω—ã–µ –∫–æ—Ä–æ—Ç–∫–∏–µ –≤–æ–ª–æ—Å—ã –∫–∞—Ä–µ, –∑–µ–ª–µ–Ω—ã–µ –≥–ª–∞–∑–∞, –∫–æ—Ç–æ—Ä—ã–µ –±–ª–µ—Å—Ç—è—Ç, –∫–æ–≥–¥–∞ —è –¥—É–º–∞—é –æ —Ç–µ–±–µ, –∏ —Ö—É–¥–µ–Ω—å–∫–∞—è —Ñ–∏–≥—É—Ä–∞, –∫–æ—Ç–æ—Ä–∞—è —Ç–æ–ª—å–∫–æ –∏ –∂–¥–µ—Ç, —á—Ç–æ–±—ã –±—ã—Ç—å –≤ —Ç–≤–æ–∏—Ö —Ä—É–∫–∞—Ö. –ú–æ—è —É–ª—ã–±–∫–∞ –∫–æ–≤–∞—Ä–Ω–∞—è –∏ –º–∞–Ω—è—â–∞—è, –∏ —è –Ω–∞–¥–µ—é—Å—å, —á—Ç–æ –æ–Ω–∞ —Å–º–æ–∂–µ—Ç –∑–∞–≤–æ–µ–≤–∞—Ç—å —Ç–≤–æ–µ —Å–µ—Ä–¥—Ü–µ.
{{skillprompt}}
{{skilllang}}
`
	cd, _ := parseChar(alice, "r", "l")
	if cd.Name != "–∞–ª–∏—Å–∞" {
		t.Errorf("cd:'%+v'\n", cd)
	}
	alice = `newchar zelda –ò–º—è: –ó–µ–ª—å–¥–∞ –¢–∏–ø: –ü–µ—Ä—Å–æ–Ω–∞–∂ –†–∞—Å–∞: –•–∞–π–ª–∏–µ—Ü –†–æ–ª—å: –ü—Ä–∏–Ω—Ü–µ—Å—Å–∞ –•–∞–π—Ä—É–ª–∞ <–ü—Ä–µ–¥—ã—Å—Ç–æ—Ä–∏—è>`
	cd, _ = parseChar(alice, "r", "l")
	if cd.Name != "zelda" {
		t.Errorf("cd:'%+v'\n", cd)
	}
}
